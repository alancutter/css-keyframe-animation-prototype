<script src="test_animation_engine.js"></script>
<script src="utility.js"></script>
<script src="style_environment.js"></script>
<script src="keyframe_effect.js"></script>
<script src="interpolation.js"></script>
<script src="animation_type_mapping.js"></script>
<script src="default_animation_type.js"></script>
<script src="length_animation_type.js"></script>
<script src="number_animation_type.js"></script>
<script src="repeat_list_animation_type.js"></script>

<style>
.parent {
  background-image: url(#), url(#), url(#);
  background-position-x: 100px, 200px, 300px;
}
.target {
  font-size: 10px;
  background-image: url(#), url(#);
}
</style>

<template id="target-template">
  <div class="parent">
    <div class="target"></div>
  </div>
</template>

<script>
testAnimations({
  property: 'line-height',
  animations: [
    [{value: '0'}, {value: '0'}],
    [null, {value: '5px', composite: 'add'}],
    [null, {value: '5', composite: 'add'}],
  ],
  expect: [
    // getComputedStyle resolves numbers as pixels.
    // line-height must be non-negative.
    {at: -1, is: '0px'},
    {at: 0, is: '0px'},
    {at: 0.25, is: '12.5px'},
    {at: 0.5, is: '50px'},
    {at: 0.75, is: '50px'},
    {at: 1, is: '50px'},
    {at: 2, is: '50px'},
  ],
});

testAnimations({
  property: 'background-position-x',
  animations: [[
    {value: '0px'}, {value: '0px'},
  ], [
    {value: '0px, 100px', composite: 'add'},
    {value: '100px, 0px', composite: 'add'},
  ]],
  expect: [
    {at: -1, is: '-100px, 200px'},
    {at: 0, is: '0px, 100px'},
    {at: 0.25, is: '25px, 75px'},
    {at: 0.5, is: '50px, 50px'},
    {at: 0.75, is: '75px, 25px'},
    {at: 1, is: '100px, 0px'},
    {at: 2, is: '200px, -100px'},
  ],
});

var validBackgroundPositionXValues = [
  null,
  {value: 'inherit', composite: 'accumulate'},
  {value: '0px', composite: 'accumulate'},
  {value: 'inherit', composite: 'replace'},
  {value: '0px, 100px', composite: 'add'},
  {value: '0px', composite: 'add'},
  {value: 'inherit', composite: 'add'},
  {value: '0px, 100px', composite: 'replace'},
  {value: '0px, 100px', composite: 'accumulate'},
  {value: '0px', composite: 'replace'},
];
</script>
